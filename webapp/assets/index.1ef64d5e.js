var $e=Object.defineProperty;var le=Object.getOwnPropertySymbols;var xe=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable;var ce=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,M=(e,t)=>{for(var n in t||(t={}))xe.call(t,n)&&ce(e,n,t[n]);if(le)for(var n of le(t))je.call(t,n)&&ce(e,n,t[n]);return e};import{r as de,a as f,o as m,c as $,w as Ue,b as x,v as Re,d as i,e as y,u as p,t as C,T as De,f as ue,g as Fe,h as Me,i as Ne,j as Oe,k as Ve,l as Be,m as Ke,n as He,p as j,q as me,s as Y,x as U,y as N,z as G,A as W,B as J,C as pe,D as z,F as Q,K as Ye,E as ze,G as qe,H as X,I as _e,J as O,L as Z,M as ee,N as ve,O as Ge,P as ge,Q as V,R as We,S as Je,U as Qe,V as R}from"./vendor.7bc67b35.js";const Xe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&o(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};Xe();const Ze="modulepreload",he={},et="/",k=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${et}${o}`,o in he)return;he[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${a}`))return;const r=document.createElement("link");if(r.rel=s?"stylesheet":Ze,s||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),s)return new Promise((l,u)=>{r.addEventListener("load",l),r.addEventListener("error",u)})})).then(()=>t())};const tt={class:"message_container"},ot={class:"icon","aria-hidden":"true"},nt=["xlink:href"],st={class:"text"},it={props:{type:{type:String,default:"success"},text:{type:String,default:""},afterRemoveFun:{type:Function,default:()=>{}}},setup(e){const t=e,n=de({success:"#icon-chenggong",warning:"#icon-jinggao",error:"#icon-cuowu"}),o=f(!0);return setTimeout(()=>{o.value=!1,t.afterRemoveFun()},2e3),(s,a)=>(m(),$(De,{name:"slide-fade"},{default:Ue(()=>[x(i("div",tt,[(m(),y("svg",ot,[i("use",{"xlink:href":p(n)[e.type]},null,8,nt)])),i("span",st,C(e.text),1)],512),[[Re,o.value]])]),_:1}))}},te=(e,t)=>{let n=document.createElement("div"),o=document.createAttribute("class");o.value="message_box",n.setAttributeNode(o);const s=60,a=document.querySelectorAll(".message_box");n.style.top=`${a.length*s}px`;const r=()=>{for(let _=0;_<a.length;_++)a[_].style.top=`${_*s}px`},u=ue(it,{type:e,text:t,afterRemoveFun:()=>{u.unmount(n),document.body.removeChild(n),r()}});return u.vm=u.mount(n),document.body.appendChild(n),u};var I={success(e=""){return te("success",e)},warning(e=""){return te("warning",e)},error(e=""){return te("error",e)}};const fe="production",rt={dev:{baseApi:"/api",mockApi:"https://www.fastmock.site/mock/c213efb03a5cad1915f73f29ba1080b0/api"},prod:{baseApi:"/api",mockApi:"https://www.fastmock.site/mock/c213efb03a5cad1915f73f29ba1080b0/api"}};var D=M({env:fe,mock:!1,namespace:"FreeDesign"},rt[fe]);const at=[{path:"/",redirect:"/tutorial"},{name:"tutorial",path:"/tutorial",meta:{id:0},component:()=>k(()=>import("./NoviceTutorial.5501fe96.js"),["assets/NoviceTutorial.5501fe96.js","assets/NoviceTutorial.b93c1077.css","assets/vendor.7bc67b35.js"])},{name:"project",path:"/project",meta:{id:1},component:()=>k(()=>import("./ProjectManagement.51f80541.js"),["assets/ProjectManagement.51f80541.js","assets/ProjectManagement.d72c0e56.css","assets/vendor.7bc67b35.js","assets/404.d41367bd.js","assets/el-input.be307eb8.js","assets/el-input.0abc070b.css"])},{name:"template",path:"/template",meta:{id:2},component:()=>k(()=>import("./RelatedTemplate.6ce0106b.js"),["assets/RelatedTemplate.6ce0106b.js","assets/RelatedTemplate.bccf1203.css","assets/vendor.7bc67b35.js"])},{name:"NotFound",path:"/:pathMatch(.*)*",component:()=>k(()=>import("./NotFound.1ddb5c3d.js"),["assets/NotFound.1ddb5c3d.js","assets/NotFound.da8f129c.css","assets/404.d41367bd.js","assets/vendor.7bc67b35.js"])},{name:"ProjectEdit",path:"/projectEdit/:id",meta:{isEdit:!0},component:()=>k(()=>import("./ProjectEdit.1f75afa7.js"),["assets/ProjectEdit.1f75afa7.js","assets/ProjectEdit.bc9fc89c.css","assets/el-input.be307eb8.js","assets/el-input.0abc070b.css","assets/vendor.7bc67b35.js","assets/componentMap.7054b220.js"])}],oe=Fe({history:Me(),routes:at});oe.beforeEach((e,t,n)=>{e.name==="ProjectEdit"&&!localStorage.getItem("token")?n({name:"project"}):n()});function w(e){if(Array.isArray(e)){const t=[];return e.forEach(n=>{t.push(w(n))}),t}else if(e&&typeof e=="object"){const t={};for(let n in e)t[n]=w(e[n]);return t}else return e}function ye(e,t){const n=e.components.get(t).children;e.components.delete(t),n.forEach(o=>{ye(e,o.id)})}function Ce(e,{parentId:t,targetId:n}){const o=e.components.get(t).children;let s=0;for(;s<o.length&&o[s].id!==n;s++);return o.splice(s,1)[0]}let B=-1;function be(e,t){let n=-1;return e.id?(n=e.id,B=n>B?n:B):(B+=1,n=B),{id:n,parentId:t,tag:e.tag,style:e.style?w(e.style):{},values:e.values?w(e.values):{},event:e.event?w(e.event):[],tempStyle:{},children:[]}}function ne(e){e.activeComponentId!==-1&&(e.components.get(e.activeComponentId).tempStyle={},e.activeComponentId=-1)}function Ee(e,{node:t,parentId:n=1}){const o=be(t,n);e.components.set(o.id,o),n!==0&&e.components.get(n).children.push(o),t.children&&t.children.forEach(s=>Ee(e,{node:s,parentId:o.id}))}function ke(e,{node:t,parentId:n=1}){const o=be(t,n);e.components.set(o.id,o),n!==0&&e.components.get(n).children.push(o),t.children&&t.children.forEach(s=>ke(e,{node:s,parentId:o.id}))}function Ie(e){const t={id:e.id,tag:e.tag,style:w(e.style),values:w(e.values),event:w(e.event)};return e.children&&(t.children=[],e.children.forEach(n=>t.children.push(Ie(n)))),t}var lt={namespaced:!0,state:{components:new Map,activeComponentId:-1,activeContainerId:-1,fileContent:{},slimComponents:null},getters:{activeComponent(e){if(e.activeComponentId===-1)return null;const t=e.components.get(e.activeComponentId);return Object.assign({},t,{parentTag:e.components.get(t.parentId).tag})},componnetsId(e){return Array.from(e.components.keys()).filter(t=>t!==1&&t!==e.activeComponentId)}},mutations:{initComponents:ke,addComponent:Ee,deleteComponent(e){const t=e.activeComponentId;if(t===-1)return;const n=e.components.get(t).parentId;ne(e),ye(e,t),Ce(e,{parentId:n,targetId:t})},moveComponent(e,{to:t,from:n,targetId:o,position:s}){if(t!==-1&&(e.components.get(t).tag==="PositionLayout"?(e.components.get(o).style.left=s.left+"px",e.components.get(o).style.top=s.top+"px"):(delete e.components.get(o).style.left,delete e.components.get(o).style.top),t!==n)){const a=Ce(e,{parentId:n,targetId:o});a.parentId=t,e.components.get(t).children.push(a)}},setActiveComponent(e,t){t===-1||t===1||(ne(e),e.activeComponentId=t,e.components.get(t).tempStyle["z-index"]=1e3)},resetActiveComponent:ne,setActiveComponentStyle(e,t){if(e.activeComponentId===-1)return;const n=e.components.get(e.activeComponentId).style;for(let o in t)n[o]=t[o]},setActiveComponentTempStyle(e,t){if(e.activeComponentId===-1)return;const n=e.components.get(e.activeComponentId).tempStyle;for(let o in t)n[o]=t[o]},clearActiveComponentTempStyle(e,t){t!==-1&&(e.components.get(t).tempStyle={})},setActiveContainer(e,t){e.activeContainerId=t},resetActiveContainer(e){e.activeContainerId=-1},setActiveComponentValues(e,t){if(e.activeComponentId===-1)return;const n=e.components.get(e.activeComponentId).values;for(let o in t)n[o]=t[o]},setActiveComponentEvents(e,{event:t}){e.activeComponentId!==-1&&Array.isArray(t)&&(e.components.get(e.activeComponentId).event=w(t))},clearAllStates(e){e.components=new Map,e.activeComponentId=-1,e.activeContainerId=-1,e.fileContent={},e.slimComponents=null},slimComponents(e){if(e.components.size===0)return!1;e.fileContent.root=Ie(e.components.get(1))},setActiveComponentSize(e,{widthInPx:t,heightInPx:n}){const o=e.activeComponentId;e.components.get(o).style.width=t,e.components.get(o).style.height=n},setFileContent(e,t){for(let n in t)n!=="root"&&(e.fileContent[n]=t[n])}}};const ct=e=>{if(Oe(e)){const t=Ve(e.get(1));return new Map([[1,t]])}},se="replaceEditPage",dt=({state:e,dispatch:t,commit:n})=>{const o=e;if(o.i<=0)return;const s=o.history[o.i-1];t(se,{editPage:s},{root:!0}),n("updateI",o.i-1)},ut=({state:e,dispatch:t,commit:n})=>{const o=e;if(o.i>=o.history.length-1)return;const s=o.history[o.i+1];t(se,{editPage:s},{root:!0}),n("updateI",o.i+1)},mt=({commit:e})=>{e("truncateHistory",0)},ie=Symbol("isInternal"),P="history",pt=new Set(["setActiveContainer","resetActiveContainer","setActiveComponentTempStyle","clearActiveComponentTempStyle","setActiveComponent","resetActiveComponent","setActiveComponentSize","clearAllStates","initComponents","setFileContent","slimComponents"]),_t=e=>!pt.has(e),vt=`${P}/addItemToHistory`,gt=`${P}/truncateHistory`,ht=`${P}/updateI`,ft=e=>(n,o)=>{if(o[P][ie])return;const s=n.type;if(!s.startsWith("editPage/"))return;const a=s.split("/")[1];if(!_t(a))return;const r=o.history;r.i!==r.history.length-1&&e.commit(gt,r.i+1);const l=Ne(o.editPage,ct);e.commit(vt,l),e.commit(ht,r.i+1)},yt=e=>{e.registerModule(P,{namespaced:!0,state:()=>({[ie]:!1,history:[],i:-1}),getters:{canRedo:n=>!(n.i>=n.history.length-1),canUndo:n=>!(n.i<=0)},mutations:{setInternalFlag(n,o){n[ie]=o},addItemToHistory(n,o){n.history.push(o)},truncateHistory(n,o){n.history.length=o},updateI(n,o){n.i=o}},actions:{undo:dt,redo:ut,resetHistory:mt}});const t=ft(e);e.subscribe(t)},Ct=e=>{e.editPage.components=new Map},bt={__resetEditPageComponentsMap:Ct},Et=({commit:e},{editPage:t})=>{e(Pe,!0),e("editPage/resetActiveComponent"),e("editPage/resetActiveContainer");const n=t.components.get(1);e("__resetEditPageComponentsMap"),e("editPage/addComponent",{node:n,parentId:0}),e(Pe,!1)},kt={[se]:Et},It=`${P}/redo`,Pt=`${P}/undo`,St=`${P}/canRedo`,wt=`${P}/canUndo`,on=`${P}/resetHistory`,Pe=`${P}/setInternalFlag`;var q=Be({state:{loginFormClose:!1,token:null,username:null},mutations:M({handleLoginFormClose(e){e.loginFormClose=!e.loginFormClose},setToken(e,t){e.token=t},setUsername(e,t){e.username=t},setLoginFormClose(e,t){e.loginFormClose=t}},bt),actions:M({},kt),modules:{editPage:lt},plugins:[yt]});const K=Ke.create({baseUrl:D.baseApi,timeout:8e3});K.interceptors.request.use(e=>{const t=e.headers,n=localStorage.getItem("token")||"";return["/user/login","/user/register"].includes(e.url)||(t.token=n),e});K.interceptors.response.use(e=>{const{code:t}=e.data;return t===4002&&(q.commit("setLoginFormClose",!0),q.commit("setToken",void 0),q.commit("setUsername",void 0),localStorage.removeItem("token"),oe.push("/project")),e.data});const v=e=>{e.method=e.method||"get",e.method.toLowerCase()==="get"&&(e.params=e.data);let t=D.mock;return typeof e.mock!="undefined"&&(t=e.mock),D.env==="prod"?K.defaults.baseURL=D.baseApi:K.defaults.baseURL=t?D.mockApi:D.baseApi,K(e)};["get","post","put","delete","patch"].forEach(e=>{v[e]=(t,n,o)=>v(M({url:t,data:n,method:e},o))});var T={async login(e){return v({url:"/user/login",method:"POST",data:e})},async register(e){return v({url:"/user/register",method:"POST",data:e})},async getUserProject(){return v({url:"/project/getUserProject",method:"GET"})},async getUserInfo(){return v({url:"/user/getUserInfo",method:"GET"})},async modifyUsername(e){return v({url:"/user/modifyUsername",method:"POST",data:e})},async download(e){return v({url:"/project/export",method:"GET",data:{id:e},responseType:"blob"}).then(t=>{He(t,e+".json")})},async deleteProject(e){return v({url:"/project/deleteProject",method:"POST",data:e})},async createProject(e){return v({url:"/project/createProject",method:"POST",data:e})},async modifyName(e){return v({url:"/project/modifyName",method:"POST",data:e})},async getProjectContent(e){return v({url:"/project/getProjectContent",method:"GET",data:e})},async release(e){return v({url:"/project/release",method:"POST",data:e})},async modifyContent(e){return v({url:"/project/modifyContent",method:"POST",data:e})},importProject({projectName:e,file:t}){const n=new FormData;return n.append("projectName",e),n.append("file",t),v({url:"/project/import",method:"post",data:n})},uploadImg(e){const t=new FormData;return t.append("file",e),v({url:"/other/uploadImg",method:"POST",data:t})}};var H=(e,t)=>{const n=e.__vccOpts||e;for(const[o,s]of t)n[o]=s;return n};const Se=e=>(W("data-v-534ec400"),e=e(),J(),e),Tt={class:"login"},At=Se(()=>i("label",{for:"account"},"\u8D26\u53F7",-1)),Lt={class:"form_error"},$t=Se(()=>i("label",{for:"password"},"\u5BC6\u7801",-1)),xt=["onKeyup"],jt={class:"form_error"},Ut={setup(e){const t=j();me({validationSchema:{account(d){if(!!d)return/^\w{8,20}$/.test(d)?!0:"\u9700\u89818-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD"},pwd(d){if(!!d)return/^\w{8,20}$/.test(d)?!0:"\u9700\u89818-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD"}}});const{value:o,errorMessage:s,meta:a}=Y("account"),{value:r,errorMessage:l,meta:u}=Y("pwd"),_=async()=>{if(a.valid&&u.valid){const c=await T.login({account:o.value,pwd:r.value});if(c.code===2e3){I.success(c.message),t.commit("handleLoginFormClose"),t.commit("setToken",c.data.token),localStorage.setItem("token",c.data.token);const{data:g}=await T.getUserInfo();t.commit("setUsername",g.username)}else I.error(c.message)}else I.warning("\u8BF7\u6B63\u786E\u586B\u5199\u4FE1\u606F")};return(d,c)=>(m(),y("div",Tt,[At,x(i("input",{type:"text",id:"account",placeholder:"\u8BF7\u8F93\u51658-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD","onUpdate:modelValue":c[0]||(c[0]=g=>N(o)?o.value=g:null)},null,512),[[U,p(o)]]),i("div",Lt,C(p(s)),1),$t,x(i("input",{type:"password",id:"password",placeholder:"\u8BF7\u8F93\u51658-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD","onUpdate:modelValue":c[1]||(c[1]=g=>N(r)?r.value=g:null),onKeyup:G(_,["enter"])},null,40,xt),[[U,p(r)]]),i("div",jt,C(p(l)),1),i("div",{class:"login_form_button",onClick:_}," \u767B\u5F55 ")]))}};var Rt=H(Ut,[["__scopeId","data-v-534ec400"]]);const we=e=>(W("data-v-7d496112"),e=e(),J(),e),Dt={class:"logon"},Ft=we(()=>i("label",{for:"account"},"\u8D26\u53F7",-1)),Mt={class:"form_error"},Nt=we(()=>i("label",{for:"password"},"\u5BC6\u7801",-1)),Ot=["onKeyup"],Vt={class:"form_error"},Bt={setup(e){const t=j();me({validationSchema:{account(d){if(!!d)return/^\w{8,20}$/.test(d)?!0:"\u9700\u89818-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD"},pwd(d){if(!!d)return/^\w{8,20}$/.test(d)?!0:"\u9700\u89818-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD"}}});const{value:o,errorMessage:s,meta:a}=Y("account"),{value:r,errorMessage:l,meta:u}=Y("pwd"),_=async()=>{if(a.valid&&u.valid){const c=await T.register({account:o.value,pwd:r.value});c.code===2e3?(I.success(c.message),t.commit("handleLoginFormClose")):I.error(c.message)}else I.warning("\u8BF7\u6B63\u786E\u586B\u5199\u4FE1\u606F")};return(d,c)=>(m(),y("div",Dt,[Ft,x(i("input",{type:"text",id:"account",placeholder:"\u8BF7\u8F93\u51658-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD","onUpdate:modelValue":c[0]||(c[0]=g=>N(o)?o.value=g:null)},null,512),[[U,p(o)]]),i("div",Mt,C(p(s)),1),Nt,x(i("input",{type:"password",id:"password",placeholder:"\u8BF7\u8F93\u51658-20\u4F4D\u4EE5\u5185\u7684\u6570\u5B57\u6216\u5B57\u6BCD","onUpdate:modelValue":c[1]||(c[1]=g=>N(r)?r.value=g:null),onKeyup:G(_,["enter"])},null,40,Ot),[[U,p(r)]]),i("div",Vt,C(p(l)),1),i("div",{class:"logon_form_button",onClick:_}," \u6CE8\u518C ")]))}};var Kt=H(Bt,[["__scopeId","data-v-7d496112"]]);const Ht={class:"login_form"},Yt={class:"tab_change"},zt=["onClick"],qt={setup(e){const t=j(),n=[{id:0,name:Rt,zh:"\u767B\u5F55"},{id:1,name:Kt,zh:"\u6CE8\u518C"}],o=f(0),s=()=>t.commit("handleLoginFormClose");return(a,r)=>(m(),$(qe,{to:".main"},[i("div",{class:"mask",onClick:s}),i("div",Ht,[i("div",Yt,[(m(),y(Q,null,pe(n,l=>i("div",{key:l.id,class:z(["tab_button",{active:o.value===l.id}]),onClick:u=>o.value=l.id},C(l.zh),11,zt)),64))]),(m(),$(Ye,null,[(m(),$(ze(n[o.value].name),{key:o.value}))],1024))])]))}};var Gt=H(qt,[["__scopeId","data-v-8281c272"]]),Wt="/logo.png",Jt="/img/\u9ED8\u8BA4\u5934\u50CF.png";const Qt={class:"nav"},Xt={class:"nav_left"},Zt=["onClick"],eo=["src","alt"],to={class:"nav_text"},oo={key:0,class:"nav_right"},no=i("div",{class:"avatar"},[i("img",{src:Jt,alt:"\u9ED8\u8BA4\u5934\u50CF"})],-1),so=i("div",null,"\u767B\u5F55",-1),io=i("div",null,"|",-1),ro=i("div",null,"\u6CE8\u518C",-1),ao=[so,io,ro],lo={key:1,class:"nav_right-logined"},co={class:"avatar"},uo={setup(e){const t=j(),n=X(),o=_e(),s=de([{id:0,text:"\u65B0\u624B\u6559\u7A0B",img:"/img/\u65B0\u624B\u6559\u7A0B.png",path:"/tutorial"},{id:1,text:"\u9879\u76EE\u7BA1\u7406",img:"/img/\u9879\u76EE\u7BA1\u7406.png",path:"/project"},{id:2,text:"\u76F8\u5173\u6A21\u677F",img:"/img/\u76F8\u5173\u6A21\u677F.png",path:"/template"}]),a=b=>n.push(b.path),r=()=>t.commit("handleLoginFormClose"),l=O(()=>{var b;return(b=t.state.username)==null?void 0:b.slice(0,2)}),u=f(!1),_=f(null),d=O({get:()=>t.state.username,set:b=>_.value=b}),c=()=>u.value=!u.value,g=async()=>{const{code:b,message:L}=await T.modifyUsername({username:_.value});b===2e3?(t.commit("setUsername",_.value),c(),I.success("\u4FEE\u6539\u6210\u529F")):I.error(L)};return(b,L)=>(m(),y("div",Qt,[i("div",Xt,[i("img",{src:Wt,alt:"logo",class:"logo",onClick:L[0]||(L[0]=E=>p(n).push("/tutorial"))}),(m(!0),y(Q,null,pe(p(s),E=>(m(),y("div",{key:E.id,class:"nav_item",onClick:re=>a(E)},[i("img",{src:E.img,alt:E.text,class:"nav_img",style:Z({visibility:E.id===p(o).meta.id?"visible":"hidden"})},null,12,eo),i("span",to,C(E.text),1)],8,Zt))),128))]),p(t).state.token?(m(),y("div",lo,[i("div",co,C(p(l)),1),i("div",{class:"username",onClick:c,style:Z({display:u.value?"none":"block"})},C(p(t).state.username),5),i("div",{class:"username_edit",style:Z({display:u.value?"flex":"none"})},[x(i("input",{type:"text","onUpdate:modelValue":L[1]||(L[1]=E=>N(d)?d.value=E:null)},null,512),[[U,p(d)]]),i("div",{class:"username_edit_btn",onClick:g}," \u786E\u8BA4 "),i("div",{class:"username_edit_btn",onClick:c}," \u53D6\u6D88 ")],4)])):(m(),y("div",oo,[no,i("div",{class:"action",onClick:r},ao)]))]))}};var mo="/img/EditIcons/\u94FE\u63A5.png";const po={name:"DialogBox",props:{dialogVisible:{type:Boolean,default:!1}},emits:["dialogVisible"],setup(e,{emit:t}){let n=f(e.dialogVisible);ee(()=>e.dialogVisible,()=>{n.value=e.dialogVisible});const o=ve("isPublishBtn"),s=()=>{t("dialogVisible",n.value)};let a=ve("onlineUrl");return{btn:o,linkValue:a,dialogDisvisible:n,cancelDialog:s,copyPublishLink:()=>{document.getElementById("online-link").select(),document.execCommand("copy")}}}},_o={id:"dialog-outsidebox"},vo={class:"dialog-box"},go=Ge(" \u9879\u76EE"),ho={class:"link-box"},fo=i("img",{src:mo},null,-1),yo=["value"];function Co(e,t,n,o,s,a){return m(),y("div",_o,[i("div",null,[i("div",vo,[i("h3",null,[go,i("span",{class:z(o.btn?"publishText":"")},C(o.btn?"\u53D1\u5E03":"\u9884\u89C8"),3)]),i("div",ho,[fo,i("input",{id:"online-link",type:"text",value:"http://159.75.249.227:8848"+o.linkValue},null,8,yo)]),i("button",{class:z(o.btn?"publishCopyBtn":"copyBtn"),onClick:t[0]||(t[0]=(...r)=>o.copyPublishLink&&o.copyPublishLink(...r))}," \u590D \xA0 \u5236 ",2),i("button",{class:z(o.btn?"publishCancelBtn":"cancelBtn"),onClick:t[1]||(t[1]=(...r)=>o.cancelDialog&&o.cancelDialog(...r))}," \u53D6 \xA0 \u6D88 ",2)])])])}var Te=H(po,[["render",Co]]);const bo={name:"ProjectEditNav",components:{DialogBox:Te},setup(){let e=f(!1);const t=h=>{e.value=h},n=j(),o=O(()=>{var h;return(h=n.state.username)==null?void 0:h.slice(0,2)}),s=_e(),a=X();let r=f(!0),l=f("");const u=()=>{n.commit("editPage/slimComponents");const h=n.state.editPage.fileContent;return T.modifyContent({id:s.params.id,content:JSON.stringify(h)}).then(S=>{S.code===2e3&&(a.replace({query:{modifyTime:S.data.modifyTime,name:a.currentRoute.value.query.name}}),l.value=new Date(S.data.modifyTime).toLocaleString().replace(/年|月/g,"-").replace(/日/g," "),r.value=!1)})};let _=f(0);const d=()=>{_.value>5*60&&(_.value=0,u()),_.value++,setTimeout(d,1e3)};d(),ee(()=>[a.currentRoute.value.query.modifyTime,l.value],([h])=>{l.value=new Date(Number(h)).toLocaleString().replace(/年|月/g,"-").replace(/日/g," "),r.value=!1},{deep:!1,immediate:!0});let c=f(!0),g=f("");const b=h=>{h?confirm("\u662F\u5426\u786E\u5B9A\u5C06\u672C\u9879\u76EE\u53D1\u5E03\uFF1F")&&(c.value=h,u().then(()=>{T.release({id:s.params.id,temp:!1}).then(S=>{g.value=S.data.url}),e.value=!e.value})):(c.value=h,u().then(()=>{T.release({id:s.params.id,temp:!0}).then(S=>{g.value=S.data.url}),e.value=!e.value}))};ge("isPublishBtn",c),ge("onlineUrl",g);const L=()=>{},E=()=>{n.dispatch(Pt)},re=()=>{n.dispatch(It)},Ae=O(()=>n.getters[wt]),Le=O(()=>n.getters[St]),ae=f(s.query.name);return{userIcon:o,childData:t,dialogVisible:e,saveTime:l,isSaveProject:r,saveProject:u,displaylDialog:b,publishMessage:L,undo:E,redo:re,canRedo:Le,canUndo:Ae,fileName:ae,changeFileName:async()=>{const{code:h,message:S}=await T.modifyName({id:s.params.id,name:ae.value});h===2e3?I.success(S):I.error(S)}}}},F=e=>(W("data-v-46991976"),e=e(),J(),e),Eo={class:"edit-nav-box"},ko={class:"edit-nav"},Io={class:"left-part"},Po={id:"user-msg"},So={id:"user-icon"},wo={id:"to-manage-page"},To=F(()=>i("i",null,null,-1)),Ao=F(()=>i("span",null,"\u65B0\u624B\u6559\u7A0B",-1)),Lo=[To,Ao],$o=F(()=>i("i",null,null,-1)),xo=F(()=>i("span",null,"\u9879\u76EE\u7BA1\u7406",-1)),jo=[$o,xo],Uo=F(()=>i("i",null,null,-1)),Ro=F(()=>i("span",null,"\u76F8\u5173\u6A21\u677F",-1)),Do=[Uo,Ro],Fo={class:"file-name"},Mo={class:"edit-operation"},No=["disabled"],Oo=["disabled"],Vo={key:0,id:"edit-save-time"},Bo={class:"right-part"};function Ko(e,t,n,o,s,a){const r=Te;return m(),y(Q,null,[i("div",Eo,[i("div",ko,[i("div",Io,[i("div",Po,[i("div",So,C(o.userIcon),1),i("ul",wo,[i("li",{onClick:t[0]||(t[0]=l=>e.$router.push("/tutorial"))},Lo),i("li",{onClick:t[1]||(t[1]=l=>e.$router.push("/project"))},jo),i("li",{onClick:t[2]||(t[2]=l=>e.$router.push("/template"))},Do)])]),i("div",Fo,[x(i("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>o.fileName=l),onKeyup:t[4]||(t[4]=G((...l)=>o.changeFileName&&o.changeFileName(...l),["enter"]))},null,544),[[U,o.fileName]])]),i("div",Mo,[i("button",{id:"undo",onClick:t[5]||(t[5]=(...l)=>o.undo&&o.undo(...l)),disabled:!o.canUndo},null,8,No),i("button",{id:"redo",onClick:t[6]||(t[6]=(...l)=>o.redo&&o.redo(...l)),disabled:!o.canRedo},null,8,Oo),i("button",{id:"edit-save",onClick:t[7]||(t[7]=(...l)=>o.saveProject&&o.saveProject(...l))}),o.isSaveProject?V("",!0):(m(),y("p",Vo,"\u4FDD\u5B58\u4E8E "+C(o.saveTime),1))])]),i("div",Bo,[i("button",{id:"preview",onClick:t[8]||(t[8]=l=>o.displaylDialog(!1))},"\u9884\u89C8"),i("button",{id:"publish",onClick:t[9]||(t[9]=l=>o.displaylDialog(!0))},"\u53D1 \xA0 \u5E03")])])]),o.dialogVisible?(m(),$(r,{key:0,onDialogVisible:o.childData},null,8,["onDialogVisible"])):V("",!0)],64)}var Ho=H(bo,[["render",Ko],["__scopeId","data-v-46991976"]]);const Yo={class:"container"},zo={setup(e){const t=j();We(async()=>{const s=localStorage.getItem("token");if(s){t.commit("setToken",s);const{data:a}=await T.getUserInfo();a?t.commit("setUsername",a.username):(I.error("\u767B\u5F55\u8FC7\u671F\u4E86\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55"),t.commit("setToken",null),t.commit("handleLoginFormClose"))}}),Date.prototype.format=function(s){var a={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(s)&&(s=s.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in a)new RegExp("("+r+")").test(s)&&(s=s.replace(RegExp.$1,RegExp.$1.length==1?a[r]:("00"+a[r]).substr((""+a[r]).length)));return s};const n=X();let o=f(!1);return ee(()=>n.currentRoute.value.path,s=>{o.value=s.search("projectEdit")==1},{deep:!1,immediate:!1}),(s,a)=>{const r=Qe("router-view");return m(),y("div",Yo,[p(o)?V("",!0):(m(),$(uo,{key:0})),p(o)?(m(),$(Ho,{key:1})):V("",!0),p(t).state.loginFormClose?(m(),$(Gt,{key:2})):V("",!0),Je(r)])}}},qo=R(()=>k(()=>import("./UserButton.7ec29c01.js"),["assets/UserButton.7ec29c01.js","assets/UserButton.3b0e6918.css","assets/vendor.7bc67b35.js"])),Go=R(()=>k(()=>import("./UserImage.0c0aafba.js"),["assets/UserImage.0c0aafba.js","assets/UserImage.7b162f50.css","assets/vendor.7bc67b35.js"])),Wo=R(()=>k(()=>import("./UserText.3f27096b.js"),["assets/UserText.3f27096b.js","assets/UserText.72d315d9.css","assets/vendor.7bc67b35.js"])),Jo=R(()=>k(()=>import("./UserLayoutVertical.66abc250.js"),["assets/UserLayoutVertical.66abc250.js","assets/UserLayoutVertical.0bc68f02.css","assets/componentMap.7054b220.js","assets/vendor.7bc67b35.js"])),Qo=R(()=>k(()=>import("./UserLayoutHorizontal.4456aee2.js"),["assets/UserLayoutHorizontal.4456aee2.js","assets/UserLayoutHorizontal.e4020431.css","assets/componentMap.7054b220.js","assets/vendor.7bc67b35.js"])),Xo=R(()=>k(()=>import("./UserLayoutPosition.6109a27c.js"),["assets/UserLayoutPosition.6109a27c.js","assets/UserLayoutPosition.bb0d5ad5.css","assets/componentMap.7054b220.js","assets/vendor.7bc67b35.js"])),A=ue(zo);A.component("UserButton",qo);A.component("UserImage",Go);A.component("UserText",Wo);A.component("UserLayoutHorizontal",Qo);A.component("UserLayoutVertical",Jo);A.component("UserLayoutPosition",Xo);A.use(oe);A.use(q);A.mount("#app");export{I as M,on as R,H as _,T as a,Jt as b};
